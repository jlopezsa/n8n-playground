{"updatedAt":"2026-01-17T16:07:51.961Z","createdAt":"2025-12-04T20:27:42.427Z","id":"fQmnILZIjoTj60aL","name":"respaldar workflows en github","active":true,"isArchived":false,"nodes":[{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[2576,656],"id":"bd799bca-7e43-4e0d-bbdb-38a889ec2856","name":"Loop Over Items"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[2800,384],"id":"46cb4818-b304-43ad-9ca8-9e22ce171cad","name":"No Operation, do nothing"},{"parameters":{"rule":{"interval":[{}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[1024,656],"id":"755332b1-dfc6-434c-b54b-0048710c3d9a","name":"Nodo Programado"},{"parameters":{"resource":"file","operation":"edit","owner":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Owner'] }}","mode":"name"},"repository":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Name'] }}","mode":"name"},"filePath":"={{ $binary.data.fileName }}","binaryData":true,"commitMessage":"={{ $('Establecer campos').item.json.commitDate }}"},"id":"54894369-03e1-4fe5-903b-b17afa9434a6","name":"Actualizador de Archivos","type":"n8n-nodes-base.github","typeVersion":1,"position":[3024,656],"webhookId":"ad758c2a-4f50-4db1-a3f3-a422c67ac0a2","credentials":{"githubApi":{"id":"b0jzZgTSREauvDl0","name":"GitHub account"}}},{"parameters":{"resource":"file","owner":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Owner'] }}","mode":"name"},"repository":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Name'] }}","mode":"name"},"filePath":"={{ $binary.data.fileName }}","binaryData":true,"commitMessage":"={{ $('Establecer campos').item.json.commitDate }}"},"id":"08e9364f-572e-4034-8f70-267cafde1ce5","name":"Uploader de Archivos","type":"n8n-nodes-base.github","typeVersion":1,"position":[3024,848],"webhookId":"3ba252a0-adac-44b6-9376-d870f52e28bd","credentials":{"githubApi":{"id":"b0jzZgTSREauvDl0","name":"GitHub account"}}},{"parameters":{"assignments":{"assignments":[{"id":"a1d52ea6-5912-4988-94c2-115ad59c1996","name":"Repository Owner","value":"jlopezsa","type":"string"},{"id":"1c15b2e1-bf09-4643-8bba-3215119d2d6b","name":"Repository Name","value":"n8n-playground","type":"string"},{"id":"712f49ff-8f02-4ac3-aee8-11db8ebe5843","name":"commitDate","value":"={{ (() => {\n  const now = new Date();\n  const day = String(now.getDate()).padStart(2, '0');\n  const month = String(now.getMonth() + 1).padStart(2, '0');\n  const year = now.getFullYear();\n  const hours = String(now.getHours()).padStart(2, '0');\n  const minutes = String(now.getMinutes()).padStart(2, '0');\n  return `${day}-${month}-${year}/${hours}:${minutes}`;\n})() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1248,656],"id":"365b960e-45fc-49b1-aa2f-ae015513e002","name":"Establecer campos"},{"parameters":{"resource":"file","operation":"list","owner":{"__rl":true,"value":"={{ $json[\"Repository Owner\"] }}","mode":"name"},"repository":{"__rl":true,"value":"={{ $json['Repository Name'] }}","mode":"name"}},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[1472,656],"id":"27154308-bd16-424a-9d77-9b357fdb51c0","name":"Listar archivos","webhookId":"05c29369-ddf5-4cea-ad82-2360b9460243","alwaysOutputData":true,"credentials":{"githubApi":{"id":"b0jzZgTSREauvDl0","name":"GitHub account"}},"onError":"continueRegularOutput"},{"parameters":{"mode":"jsonToBinary","options":{"fileName":"={{ $json.name.replace(/\\s+/g, '-').toLowerCase() }}-{{ $json.id }}.json"}},"id":"a9935a41-ea7a-4a7d-8313-2a9da590f07f","name":"Convertir a binario","type":"n8n-nodes-base.moveBinaryData","typeVersion":1,"position":[2352,656]},{"parameters":{"conditions":{"string":[{"value1":"={{ $node['Combinar archivos'].json.name }}","operation":"contains","value2":"={{ $binary.data.fileName }}"}]}},"id":"adabec6b-e9dc-4d5c-b06a-a7fe973975d6","name":"Si existe","type":"n8n-nodes-base.if","typeVersion":1,"position":[2800,672]},{"parameters":{"content":"## üõ°Ô∏è Workflow de Respaldo Autom√°tico de Workflows en N8N\n\nEste workflow se ejecuta **diariamente a las 12:00 a.m.** y respalda todos los workflows de N8N en un repositorio de GitHub.\n\n---\n\n### ‚öôÔ∏è Configuraci√≥n Inicial\n\n* **Repository Owner**: tu usuario de GitHub\n* **Repository Name**: nombre del repositorio\n* **Commit Date**: fecha y hora actual (`DD-MM-YYYY/HH:SS`)\n\n---\n\n### üîê Autenticaci√≥n\n\n**GitHub:**\n\n1. Crea un repositorio en GitHub.\n2. Ve a `Settings > Developer Settings > Tokens (classic)`.\n3. Genera un token con permisos (`write-packages`).\n4. Usa el token en las credenciales de GitHub en N8N.\n\n**N8N:**\n\n1. Ve a `Settings > API` en tu instancia.\n2. Genera un token.\n3. Usa como Base URL:\n\n   ```\n   https://TU_INSTANCIA.com/api/v1\n   ```\n---\n\n### üîÑ Flujo del Proceso\n\n1. Se listan los archivos actuales del repositorio (GitHub).\n2. Se obtienen todos los workflows desde N8N (JSON).\n3. Se convierten a binario.\n4. En un loop:\n\n   * Si el archivo existe ‚Üí se actualiza.\n   * Si no existe ‚Üí se sube como nuevo.\n\n---\n\n### ‚úÖ Resultado\n\nTodos los workflows quedan respaldados en GitHub con un commit que incluye la fecha y hora.\n\n\n\n","height":1168,"width":928,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-48,0],"id":"eded7eda-2517-4ddf-b015-48721987c32d","name":"Sticky Note1"},{"parameters":{"url":"http://localhost:5678/api/v1/workflows","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[1968,656],"id":"f8436b5b-9895-4603-b554-af371fadcbf6","name":"HTTP Request","credentials":{"n8nApi":{"id":"Rh0G1S3LWz7NR7y8","name":"n8n account"},"httpHeaderAuth":{"id":"4e04eRv2HW13tkfH","name":"Header Auth account"}}},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"name"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1728,656],"id":"350f3a2f-a561-41d6-803c-6456f3ad0367","name":"Combinar archivos"},{"parameters":{"jsCode":"// Asegura que items[0].json.data sea un array\nconst workflows = items[0].json.data;\n\nreturn workflows.map(workflow => {\n  return {\n    json: workflow\n  };\n});"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2160,656],"id":"b99b8d45-3da1-484c-9eeb-3de6e20fd12e","name":"Code in JavaScript"}],"connections":{"Loop Over Items":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}],[{"node":"Si existe","type":"main","index":0}]]},"Nodo Programado":{"main":[[{"node":"Establecer campos","type":"main","index":0}]]},"Actualizador de Archivos":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Uploader de Archivos":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Establecer campos":{"main":[[{"node":"Listar archivos","type":"main","index":0}]]},"Listar archivos":{"main":[[{"node":"Combinar archivos","type":"main","index":0}]]},"Convertir a binario":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Si existe":{"main":[[{"node":"Actualizador de Archivos","type":"main","index":0}],[{"node":"Uploader de Archivos","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Combinar archivos":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Code in JavaScript":{"main":[[{"node":"Convertir a binario","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Nodo Programado":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"39c567b1-66ca-4961-9e86-a04f76cecb87","activeVersionId":"39c567b1-66ca-4961-9e86-a04f76cecb87","triggerCount":1,"shared":[{"updatedAt":"2025-12-04T20:27:42.427Z","createdAt":"2025-12-04T20:27:42.427Z","role":"workflow:owner","workflowId":"fQmnILZIjoTj60aL","projectId":"0Dd2bpafaqMtoS2H"}],"activeVersion":{"updatedAt":"2026-01-17T16:07:45.792Z","createdAt":"2026-01-17T16:07:45.792Z","versionId":"39c567b1-66ca-4961-9e86-a04f76cecb87","workflowId":"fQmnILZIjoTj60aL","nodes":[{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[2576,656],"id":"bd799bca-7e43-4e0d-bbdb-38a889ec2856","name":"Loop Over Items"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[2800,384],"id":"46cb4818-b304-43ad-9ca8-9e22ce171cad","name":"No Operation, do nothing"},{"parameters":{"rule":{"interval":[{}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[1024,656],"id":"755332b1-dfc6-434c-b54b-0048710c3d9a","name":"Nodo Programado"},{"parameters":{"resource":"file","operation":"edit","owner":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Owner'] }}","mode":"name"},"repository":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Name'] }}","mode":"name"},"filePath":"={{ $binary.data.fileName }}","binaryData":true,"commitMessage":"={{ $('Establecer campos').item.json.commitDate }}"},"id":"54894369-03e1-4fe5-903b-b17afa9434a6","name":"Actualizador de Archivos","type":"n8n-nodes-base.github","typeVersion":1,"position":[3024,656],"webhookId":"ad758c2a-4f50-4db1-a3f3-a422c67ac0a2","credentials":{"githubApi":{"id":"b0jzZgTSREauvDl0","name":"GitHub account"}}},{"parameters":{"resource":"file","owner":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Owner'] }}","mode":"name"},"repository":{"__rl":true,"value":"={{ $('Establecer campos').item.json['Repository Name'] }}","mode":"name"},"filePath":"={{ $binary.data.fileName }}","binaryData":true,"commitMessage":"={{ $('Establecer campos').item.json.commitDate }}"},"id":"08e9364f-572e-4034-8f70-267cafde1ce5","name":"Uploader de Archivos","type":"n8n-nodes-base.github","typeVersion":1,"position":[3024,848],"webhookId":"3ba252a0-adac-44b6-9376-d870f52e28bd","credentials":{"githubApi":{"id":"b0jzZgTSREauvDl0","name":"GitHub account"}}},{"parameters":{"assignments":{"assignments":[{"id":"a1d52ea6-5912-4988-94c2-115ad59c1996","name":"Repository Owner","value":"jlopezsa","type":"string"},{"id":"1c15b2e1-bf09-4643-8bba-3215119d2d6b","name":"Repository Name","value":"n8n-playground","type":"string"},{"id":"712f49ff-8f02-4ac3-aee8-11db8ebe5843","name":"commitDate","value":"={{ (() => {\n  const now = new Date();\n  const day = String(now.getDate()).padStart(2, '0');\n  const month = String(now.getMonth() + 1).padStart(2, '0');\n  const year = now.getFullYear();\n  const hours = String(now.getHours()).padStart(2, '0');\n  const minutes = String(now.getMinutes()).padStart(2, '0');\n  return `${day}-${month}-${year}/${hours}:${minutes}`;\n})() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1248,656],"id":"365b960e-45fc-49b1-aa2f-ae015513e002","name":"Establecer campos"},{"parameters":{"resource":"file","operation":"list","owner":{"__rl":true,"value":"={{ $json[\"Repository Owner\"] }}","mode":"name"},"repository":{"__rl":true,"value":"={{ $json['Repository Name'] }}","mode":"name"}},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[1472,656],"id":"27154308-bd16-424a-9d77-9b357fdb51c0","name":"Listar archivos","webhookId":"05c29369-ddf5-4cea-ad82-2360b9460243","alwaysOutputData":true,"credentials":{"githubApi":{"id":"b0jzZgTSREauvDl0","name":"GitHub account"}},"onError":"continueRegularOutput"},{"parameters":{"mode":"jsonToBinary","options":{"fileName":"={{ $json.name.replace(/\\s+/g, '-').toLowerCase() }}-{{ $json.id }}.json"}},"id":"a9935a41-ea7a-4a7d-8313-2a9da590f07f","name":"Convertir a binario","type":"n8n-nodes-base.moveBinaryData","typeVersion":1,"position":[2352,656]},{"parameters":{"conditions":{"string":[{"value1":"={{ $node['Combinar archivos'].json.name }}","operation":"contains","value2":"={{ $binary.data.fileName }}"}]}},"id":"adabec6b-e9dc-4d5c-b06a-a7fe973975d6","name":"Si existe","type":"n8n-nodes-base.if","typeVersion":1,"position":[2800,672]},{"parameters":{"content":"## üõ°Ô∏è Workflow de Respaldo Autom√°tico de Workflows en N8N\n\nEste workflow se ejecuta **diariamente a las 12:00 a.m.** y respalda todos los workflows de N8N en un repositorio de GitHub.\n\n---\n\n### ‚öôÔ∏è Configuraci√≥n Inicial\n\n* **Repository Owner**: tu usuario de GitHub\n* **Repository Name**: nombre del repositorio\n* **Commit Date**: fecha y hora actual (`DD-MM-YYYY/HH:SS`)\n\n---\n\n### üîê Autenticaci√≥n\n\n**GitHub:**\n\n1. Crea un repositorio en GitHub.\n2. Ve a `Settings > Developer Settings > Tokens (classic)`.\n3. Genera un token con permisos (`write-packages`).\n4. Usa el token en las credenciales de GitHub en N8N.\n\n**N8N:**\n\n1. Ve a `Settings > API` en tu instancia.\n2. Genera un token.\n3. Usa como Base URL:\n\n   ```\n   https://TU_INSTANCIA.com/api/v1\n   ```\n---\n\n### üîÑ Flujo del Proceso\n\n1. Se listan los archivos actuales del repositorio (GitHub).\n2. Se obtienen todos los workflows desde N8N (JSON).\n3. Se convierten a binario.\n4. En un loop:\n\n   * Si el archivo existe ‚Üí se actualiza.\n   * Si no existe ‚Üí se sube como nuevo.\n\n---\n\n### ‚úÖ Resultado\n\nTodos los workflows quedan respaldados en GitHub con un commit que incluye la fecha y hora.\n\n\n\n","height":1168,"width":928,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-48,0],"id":"eded7eda-2517-4ddf-b015-48721987c32d","name":"Sticky Note1"},{"parameters":{"url":"http://localhost:5678/api/v1/workflows","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[1968,656],"id":"f8436b5b-9895-4603-b554-af371fadcbf6","name":"HTTP Request","credentials":{"n8nApi":{"id":"Rh0G1S3LWz7NR7y8","name":"n8n account"},"httpHeaderAuth":{"id":"4e04eRv2HW13tkfH","name":"Header Auth account"}}},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"name"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1728,656],"id":"350f3a2f-a561-41d6-803c-6456f3ad0367","name":"Combinar archivos"},{"parameters":{"jsCode":"// Asegura que items[0].json.data sea un array\nconst workflows = items[0].json.data;\n\nreturn workflows.map(workflow => {\n  return {\n    json: workflow\n  };\n});"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2160,656],"id":"b99b8d45-3da1-484c-9eeb-3de6e20fd12e","name":"Code in JavaScript"}],"connections":{"Loop Over Items":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}],[{"node":"Si existe","type":"main","index":0}]]},"Nodo Programado":{"main":[[{"node":"Establecer campos","type":"main","index":0}]]},"Actualizador de Archivos":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Uploader de Archivos":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Establecer campos":{"main":[[{"node":"Listar archivos","type":"main","index":0}]]},"Listar archivos":{"main":[[{"node":"Combinar archivos","type":"main","index":0}]]},"Convertir a binario":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Si existe":{"main":[[{"node":"Actualizador de Archivos","type":"main","index":0}],[{"node":"Uploader de Archivos","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Combinar archivos":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Code in JavaScript":{"main":[[{"node":"Convertir a binario","type":"main","index":0}]]}},"authors":"Juli√°n Jair Lopez","name":null,"description":null},"tags":[]}